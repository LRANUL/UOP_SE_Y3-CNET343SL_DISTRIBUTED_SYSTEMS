<ion-header>
  <ion-toolbar>
    <ion-title>UPDATE ACCOUNT DETAILS</ion-title>
    <ion-button
      (click)="closeUpdateAccountDetailsModal()" 
      slot="end" 
      shape="round" 
      fill="outline" 
      color="danger" 
      id="closeModalButton">
      <ion-icon name="close-outline" style="font-size: 30px;"></ion-icon>
    </ion-button>
  </ion-toolbar>
</ion-header>

<ion-content>

  <!-- CONTENT CARD -->
  <ion-card>
    <ion-card-content>

      <div style="width: 70%;
                  position: relative;
                  left: 50%;
                  transform: translateX(-50%);">
        <form [formGroup]="updateAccountDetailsForm" (ngSubmit)="updateAccountDetails(updateAccountDetailsForm.value)">
          <ion-grid>
            <ion-row>
              <ion-col size="4">
                <ion-label class="update-account-details-form-text" style="position: relative;
                                                                            top: 10%;">
                  Name:
                </ion-label>
              </ion-col>
              <ion-col size="8">

                <ion-grid>
                  <ion-row>
                    <ion-col>
                      <ion-item>
                        <ion-select placeholder="Select Prefix" okText="SELECT" cancelText="DISMISS" formControlName="namePrefix">
                          <ion-select-option value="Mr.">Mr.</ion-select-option>
                        </ion-select>
                      </ion-item>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col>
                      <ion-item>
                        <ion-input type="text" placeholder="Enter First Name" clearInput formControlName="firstName"></ion-input>
                      </ion-item>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col>
                      <ion-item>
                        <ion-input type="text" placeholder="Enter Middle Name" clearInput formControlName="middleName"></ion-input>
                      </ion-item>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col>
                      <ion-item>
                        <ion-input type="text" placeholder="Enter Last Name" clearInput formControlName="lastName"></ion-input>
                      </ion-item>
                    </ion-col>
                  </ion-row>
                </ion-grid>

              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="4">
                <ion-label class="update-account-details-form-text" style="position: relative;
                                                                            top: 10%;">
                  Address:
                </ion-label>
              </ion-col>
              <ion-col size="8">

                <ion-grid>
                  <ion-row>
                    <ion-col>
                      <ion-item>
                        <ion-input type="text" placeholder="Enter Street Address" clearInput formControlName="streetAddress"></ion-input>
                      </ion-item>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col>
                      <ion-item>
                        <ion-input type="text" placeholder="Enter City" clearInput formControlName="addressCity"></ion-input>
                      </ion-item>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col>
                      <ion-item>
                        <ion-input type="text" placeholder="Enter Postal Code" clearInput formControlName="addressPostalCode"></ion-input>
                      </ion-item>
                    </ion-col>
                  </ion-row>
                </ion-grid>

              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="4">
                <ion-label class="update-account-details-form-text" style="position: absolute;
                                                                            top: 50%;
                                                                            transform: translateY(-50%);">
                  Phone Number:
                </ion-label>
              </ion-col>
              <ion-col size="8">

                <ion-grid>
                  <ion-row>
                    <ion-col size="2">
                      <div style="width: 100%;
                                  height: 100%;
                                  border: 1px solid #ccc;
                                  border-radius: 5px;">
                        <ion-label style="position: absolute;
                                          top: 50%;
                                          left: 50%;
                                          transform: translate(-50%, -50%);">
                          +94
                        </ion-label>   
                      </div>
                    </ion-col>
                    <ion-col size="10">
                      <ion-item>
                        <ion-input type="number" placeholder="Enter Number" clearInput formControlName="phoneNumber"></ion-input>
                      </ion-item>
                    </ion-col>
                  </ion-row>
                </ion-grid>

              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="4">
                <ion-label class="update-account-details-form-text" style="position: absolute;
                                                                            top: 50%;
                                                                            transform: translateY(-50%);">
                  Email Address:
                </ion-label>
              </ion-col>
              <!-- Loading Spinner - Send Email Verification -->
              <ion-spinner name="crescent" style="height: 40px;
                                                  width: 40px;
                                                  margin-top: 30px;
                                                  position: absolute;
                                                  margin-left: 27.5%;" *ngIf="loadingSpinnerVerifyNewEmail"></ion-spinner>
              <ion-col size="6" style="padding: 3%;">
                <ion-item>
                  <ion-input type="text" placeholder="Enter Email Address" clearInput (ionChange)="setFormEmailAddress($event.detail.value)" formControlName="emailAddress"></ion-input>
                </ion-item>
              </ion-col>
            </ion-row>
            <div style="width: 30px;
                          height: 30px;
                          border: 1px solid #ccc;
                          padding: 4px;
                          border-radius: 4px;
                          margin-top: 30px;
                          position: absolute;
                          margin-left: 95%;
                          margin-top: -9%;" *ngIf="newEmailVerificationSuccess == true">
              <img src="assets/images/account/manager/settings-sub-page/email-veritifed-icon.png" style="width: 30px;" />
            </div>
            <div style="width: 30px;
                        height: 30px;
                        border: 1px solid #ccc;
                        padding: 4px;
                        border-radius: 4px;
                        position: absolute;
                        margin-left: 95%;
                        margin-top: -9%;" *ngIf="newEmailVerificationSuccess == false">
              <img src="assets/images/account/manager/settings-sub-page/email-error-icon.png" style="width: 30px;" />
            </div>
            <div style="position: absolute;
                        margin-left: 94.5%;
                        margin-top: -11%;" *ngIf="enterPinCodeButton">
              <ion-button style="height: 50px;" color="dark-blue-two" (click)="openVerifyEmailAddressPopover($event)">
                ENTER PIN CODE
              </ion-button>
            </div>
            <div style="position: absolute;
                        right: 5%;
                        margin-top: -11%;">
              <ion-button style="height: 50px;" color="dark-blue" disabled="{{ verifyButtonText == 'VERIFIED' ? 'true' : 'false' }}"
                (click)="confirmBoxEmailVerification('Confirmation', 'An email with a pin code will be sent to the entered email address. Do you want to continue?', $event)">
                {{verifyButtonText}}
              </ion-button>
            </div>
            <ion-row style="margin-top: 10px;">
              <ion-col size="6">
                <ion-button color="tertiary" expand="block" type="submit" [disabled]="!updateAccountDetailsForm.valid" style="min-width: 100%;
                                                                                                                              height: 50px;
                                                                                                                              --border-radius: 10px;">
                  UPDATE DETAILS
                </ion-button>
              </ion-col>
              <ion-col size="6">
                <ion-button style="min-width: 100%;
                                  height: 50px;
                                  --border-radius: 10px;" color="green" (click)="openChangePasswordModal()">
                  CHANGE ACCOUNT PASSWORD
                </ion-button>
              </ion-col>
            </ion-row>
          </ion-grid>
        </form>
      </div>

    </ion-card-content>
  </ion-card>

</ion-content>
